%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.370604e+003; foe(n+1)=1.381607e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.242243e+003; foe(n+1)=1.250693e+003; krok(n+1)=6.173058e-004; ng(n+1)=1.610410e+003;
n=2; farx(n+1)=2.919066e+002; foe(n+1)=3.427840e+002; krok(n+1)=4.247228e-003; ng(n+1)=1.123739e+003;
n=3; farx(n+1)=2.739912e+002; foe(n+1)=3.077863e+002; krok(n+1)=3.505202e-004; ng(n+1)=1.215743e+003;
n=4; farx(n+1)=2.995297e+002; foe(n+1)=2.943318e+002; krok(n+1)=1.009503e-003; ng(n+1)=9.424579e+002;
n=5; farx(n+1)=1.942416e+002; foe(n+1)=2.409918e+002; krok(n+1)=2.519327e-003; ng(n+1)=5.973666e+002;
n=6; farx(n+1)=1.130978e+002; foe(n+1)=1.960800e+002; krok(n+1)=5.119766e-003; ng(n+1)=1.675932e+003;
n=7; farx(n+1)=8.518058e+001; foe(n+1)=1.859698e+002; krok(n+1)=9.854180e-004; ng(n+1)=1.808467e+003;
n=8; farx(n+1)=8.252672e+001; foe(n+1)=1.826043e+002; krok(n+1)=1.153878e-003; ng(n+1)=1.068477e+003;
n=9; farx(n+1)=7.204380e+001; foe(n+1)=1.770932e+002; krok(n+1)=8.130648e-003; ng(n+1)=1.082024e+003;
n=10; farx(n+1)=6.682118e+001; foe(n+1)=1.669230e+002; krok(n+1)=2.594948e-003; ng(n+1)=1.328477e+003;
n=11; farx(n+1)=5.793754e+001; foe(n+1)=1.612405e+002; krok(n+1)=6.145526e-004; ng(n+1)=1.513581e+003;
n=12; farx(n+1)=6.110820e+001; foe(n+1)=1.562788e+002; krok(n+1)=1.237443e-003; ng(n+1)=3.296064e+003;
n=13; farx(n+1)=4.985059e+001; foe(n+1)=1.448891e+002; krok(n+1)=2.257553e-003; ng(n+1)=3.510942e+003;
n=14; farx(n+1)=4.049378e+001; foe(n+1)=1.161799e+002; krok(n+1)=1.256280e-002; ng(n+1)=2.672606e+003;
n=15; farx(n+1)=4.319467e+001; foe(n+1)=1.031449e+002; krok(n+1)=8.747958e-004; ng(n+1)=2.113172e+003;
n=16; farx(n+1)=3.931143e+001; foe(n+1)=8.881098e+001; krok(n+1)=9.481985e-004; ng(n+1)=2.490729e+003;
n=17; farx(n+1)=3.814386e+001; foe(n+1)=8.658285e+001; krok(n+1)=5.294487e-004; ng(n+1)=2.441265e+003;
n=18; farx(n+1)=3.621908e+001; foe(n+1)=8.380238e+001; krok(n+1)=1.524981e-003; ng(n+1)=1.622740e+003;
n=19; farx(n+1)=3.213182e+001; foe(n+1)=8.008918e+001; krok(n+1)=3.214272e-003; ng(n+1)=1.394964e+003;
n=20; farx(n+1)=3.070223e+001; foe(n+1)=7.643706e+001; krok(n+1)=1.751967e-003; ng(n+1)=1.022512e+003;
n=21; farx(n+1)=2.843804e+001; foe(n+1)=7.142244e+001; krok(n+1)=3.017589e-003; ng(n+1)=1.257221e+003;
n=22; farx(n+1)=2.783374e+001; foe(n+1)=6.872704e+001; krok(n+1)=1.387045e-003; ng(n+1)=2.071324e+003;
n=23; farx(n+1)=2.714176e+001; foe(n+1)=6.474718e+001; krok(n+1)=9.409085e-004; ng(n+1)=2.789385e+003;
n=24; farx(n+1)=2.571882e+001; foe(n+1)=5.957402e+001; krok(n+1)=4.038010e-003; ng(n+1)=2.143781e+003;
n=25; farx(n+1)=2.203061e+001; foe(n+1)=5.230424e+001; krok(n+1)=7.777929e-003; ng(n+1)=9.688979e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.204063e+001; foe(n+1)=5.075470e+001; krok(n+1)=1.046329e-005; ng(n+1)=1.926154e+003;
n=27; farx(n+1)=2.104576e+001; foe(n+1)=4.799179e+001; krok(n+1)=2.310648e-005; ng(n+1)=1.643822e+003;
n=28; farx(n+1)=2.026640e+001; foe(n+1)=4.730091e+001; krok(n+1)=4.646090e-005; ng(n+1)=1.005062e+003;
n=29; farx(n+1)=1.751868e+001; foe(n+1)=4.262969e+001; krok(n+1)=7.740461e-004; ng(n+1)=1.097614e+003;
n=30; farx(n+1)=1.155300e+001; foe(n+1)=3.015272e+001; krok(n+1)=2.701093e-003; ng(n+1)=2.085808e+003;
n=31; farx(n+1)=1.029804e+001; foe(n+1)=2.773136e+001; krok(n+1)=5.970040e-004; ng(n+1)=1.960937e+003;
n=32; farx(n+1)=8.768613e+000; foe(n+1)=2.336568e+001; krok(n+1)=8.640164e-004; ng(n+1)=3.175274e+003;
n=33; farx(n+1)=8.319172e+000; foe(n+1)=2.162437e+001; krok(n+1)=2.426039e-004; ng(n+1)=3.143269e+003;
n=34; farx(n+1)=7.833038e+000; foe(n+1)=2.002110e+001; krok(n+1)=5.861582e-004; ng(n+1)=2.228430e+003;
n=35; farx(n+1)=6.328492e+000; foe(n+1)=1.698115e+001; krok(n+1)=2.351298e-003; ng(n+1)=3.155057e+003;
n=36; farx(n+1)=5.400511e+000; foe(n+1)=1.486664e+001; krok(n+1)=1.879363e-003; ng(n+1)=1.622322e+003;
n=37; farx(n+1)=4.926975e+000; foe(n+1)=1.318284e+001; krok(n+1)=1.790920e-003; ng(n+1)=1.939045e+003;
n=38; farx(n+1)=4.135104e+000; foe(n+1)=1.085438e+001; krok(n+1)=4.838912e-003; ng(n+1)=1.044098e+003;
n=39; farx(n+1)=3.697043e+000; foe(n+1)=9.550646e+000; krok(n+1)=3.013180e-003; ng(n+1)=7.784717e+002;
n=40; farx(n+1)=3.524522e+000; foe(n+1)=9.010304e+000; krok(n+1)=1.330026e-003; ng(n+1)=1.699219e+003;
n=41; farx(n+1)=2.807951e+000; foe(n+1)=7.648605e+000; krok(n+1)=1.896368e-003; ng(n+1)=1.245602e+003;
n=42; farx(n+1)=2.187761e+000; foe(n+1)=6.102509e+000; krok(n+1)=2.511123e-003; ng(n+1)=1.180275e+003;
n=43; farx(n+1)=2.037822e+000; foe(n+1)=5.679083e+000; krok(n+1)=4.729213e-004; ng(n+1)=1.077828e+003;
n=44; farx(n+1)=1.920130e+000; foe(n+1)=5.366426e+000; krok(n+1)=1.951356e-003; ng(n+1)=1.198054e+003;
n=45; farx(n+1)=1.684475e+000; foe(n+1)=4.759221e+000; krok(n+1)=4.752741e-003; ng(n+1)=1.401876e+003;
n=46; farx(n+1)=1.473648e+000; foe(n+1)=4.271529e+000; krok(n+1)=7.444102e-003; ng(n+1)=9.983454e+002;
n=47; farx(n+1)=1.178444e+000; foe(n+1)=3.360356e+000; krok(n+1)=2.113019e-002; ng(n+1)=1.613253e+003;
n=48; farx(n+1)=1.120455e+000; foe(n+1)=3.174297e+000; krok(n+1)=1.358387e-003; ng(n+1)=1.067692e+003;
n=49; farx(n+1)=1.026010e+000; foe(n+1)=2.925252e+000; krok(n+1)=7.385876e-003; ng(n+1)=2.548811e+002;
n=50; farx(n+1)=8.955784e-001; foe(n+1)=2.570442e+000; krok(n+1)=7.191611e-003; ng(n+1)=8.361307e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=8.904321e-001; foe(n+1)=2.474559e+000; krok(n+1)=2.586581e-006; ng(n+1)=8.572817e+002;
n=52; farx(n+1)=8.886391e-001; foe(n+1)=2.435421e+000; krok(n+1)=2.114892e-005; ng(n+1)=2.363442e+002;
n=53; farx(n+1)=8.884841e-001; foe(n+1)=2.408407e+000; krok(n+1)=1.039083e-005; ng(n+1)=2.762712e+002;
n=54; farx(n+1)=8.853124e-001; foe(n+1)=2.356707e+000; krok(n+1)=4.080480e-004; ng(n+1)=6.140012e+001;
n=55; farx(n+1)=8.428325e-001; foe(n+1)=2.158768e+000; krok(n+1)=3.127663e-003; ng(n+1)=4.809091e+001;
n=56; farx(n+1)=8.154681e-001; foe(n+1)=2.073585e+000; krok(n+1)=4.251583e-004; ng(n+1)=1.681605e+002;
n=57; farx(n+1)=7.532363e-001; foe(n+1)=1.918369e+000; krok(n+1)=4.953534e-003; ng(n+1)=2.510580e+002;
n=58; farx(n+1)=6.769924e-001; foe(n+1)=1.577899e+000; krok(n+1)=1.462925e-002; ng(n+1)=7.783467e+002;
n=59; farx(n+1)=6.816160e-001; foe(n+1)=1.445759e+000; krok(n+1)=3.966104e-003; ng(n+1)=4.459215e+002;
n=60; farx(n+1)=6.465019e-001; foe(n+1)=1.340667e+000; krok(n+1)=6.192369e-003; ng(n+1)=4.709112e+002;
n=61; farx(n+1)=6.292199e-001; foe(n+1)=1.285135e+000; krok(n+1)=1.736904e-003; ng(n+1)=4.105339e+002;
n=62; farx(n+1)=5.926935e-001; foe(n+1)=1.200474e+000; krok(n+1)=4.893929e-003; ng(n+1)=2.737569e+002;
n=63; farx(n+1)=5.000824e-001; foe(n+1)=1.105409e+000; krok(n+1)=1.023953e-002; ng(n+1)=4.417112e+002;
n=64; farx(n+1)=4.265865e-001; foe(n+1)=9.835774e-001; krok(n+1)=1.793370e-002; ng(n+1)=2.616634e+002;
n=65; farx(n+1)=4.148300e-001; foe(n+1)=9.541085e-001; krok(n+1)=4.375565e-003; ng(n+1)=4.517429e+002;
n=66; farx(n+1)=4.059228e-001; foe(n+1)=9.289726e-001; krok(n+1)=1.733857e-002; ng(n+1)=2.175799e+002;
n=67; farx(n+1)=3.750572e-001; foe(n+1)=8.720482e-001; krok(n+1)=2.622287e-002; ng(n+1)=1.102972e+002;
n=68; farx(n+1)=3.689478e-001; foe(n+1)=8.595409e-001; krok(n+1)=7.119007e-003; ng(n+1)=3.839598e+002;
n=69; farx(n+1)=3.655211e-001; foe(n+1)=8.386810e-001; krok(n+1)=2.521242e-002; ng(n+1)=2.127726e+002;
n=70; farx(n+1)=3.493695e-001; foe(n+1)=8.036666e-001; krok(n+1)=3.423266e-002; ng(n+1)=3.394412e+002;
n=71; farx(n+1)=3.305770e-001; foe(n+1)=7.735733e-001; krok(n+1)=2.727111e-002; ng(n+1)=1.504036e+002;
n=72; farx(n+1)=3.171190e-001; foe(n+1)=7.529994e-001; krok(n+1)=1.417782e-002; ng(n+1)=2.040716e+002;
n=73; farx(n+1)=3.060493e-001; foe(n+1)=7.241504e-001; krok(n+1)=4.904612e-002; ng(n+1)=1.945065e+002;
n=74; farx(n+1)=2.917901e-001; foe(n+1)=6.795619e-001; krok(n+1)=3.192743e-002; ng(n+1)=2.795508e+002;
n=75; farx(n+1)=2.882207e-001; foe(n+1)=6.664926e-001; krok(n+1)=1.803262e-002; ng(n+1)=1.408457e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.881591e-001; foe(n+1)=6.626478e-001; krok(n+1)=4.785964e-006; ng(n+1)=1.532624e+002;
n=77; farx(n+1)=2.892365e-001; foe(n+1)=6.574472e-001; krok(n+1)=2.768790e-005; ng(n+1)=6.356289e+001;
n=78; farx(n+1)=2.892480e-001; foe(n+1)=6.571542e-001; krok(n+1)=1.344676e-005; ng(n+1)=2.365086e+001;
n=79; farx(n+1)=2.885153e-001; foe(n+1)=6.507768e-001; krok(n+1)=4.780368e-005; ng(n+1)=5.561837e+001;
n=80; farx(n+1)=2.833669e-001; foe(n+1)=6.330499e-001; krok(n+1)=1.387045e-003; ng(n+1)=2.024502e+001;
n=81; farx(n+1)=2.814079e-001; foe(n+1)=6.266745e-001; krok(n+1)=2.881993e-004; ng(n+1)=2.694703e+001;
n=82; farx(n+1)=2.784201e-001; foe(n+1)=6.174415e-001; krok(n+1)=7.088910e-003; ng(n+1)=9.700402e+000;
n=83; farx(n+1)=2.758770e-001; foe(n+1)=6.069101e-001; krok(n+1)=7.242402e-003; ng(n+1)=3.087556e+001;
n=84; farx(n+1)=2.720797e-001; foe(n+1)=5.939360e-001; krok(n+1)=5.557598e-003; ng(n+1)=1.275828e+002;
n=85; farx(n+1)=2.802288e-001; foe(n+1)=5.679949e-001; krok(n+1)=1.566707e-002; ng(n+1)=2.972327e+002;
n=86; farx(n+1)=2.675826e-001; foe(n+1)=5.508200e-001; krok(n+1)=1.170476e-002; ng(n+1)=1.950626e+002;
n=87; farx(n+1)=2.462337e-001; foe(n+1)=5.272614e-001; krok(n+1)=1.750226e-002; ng(n+1)=1.989642e+002;
n=88; farx(n+1)=2.162599e-001; foe(n+1)=4.943514e-001; krok(n+1)=1.203834e-002; ng(n+1)=2.058385e+002;
n=89; farx(n+1)=2.111982e-001; foe(n+1)=4.850792e-001; krok(n+1)=7.819218e-003; ng(n+1)=2.885832e+002;
n=90; farx(n+1)=2.061798e-001; foe(n+1)=4.720718e-001; krok(n+1)=2.565544e-002; ng(n+1)=6.039777e+001;
n=91; farx(n+1)=2.004755e-001; foe(n+1)=4.577172e-001; krok(n+1)=1.289397e-002; ng(n+1)=2.705733e+002;
n=92; farx(n+1)=1.919017e-001; foe(n+1)=4.450201e-001; krok(n+1)=2.991958e-002; ng(n+1)=9.103370e+001;
n=93; farx(n+1)=1.885286e-001; foe(n+1)=4.409957e-001; krok(n+1)=7.366454e-003; ng(n+1)=1.558312e+002;
n=94; farx(n+1)=1.970237e-001; foe(n+1)=4.271071e-001; krok(n+1)=6.013962e-002; ng(n+1)=9.479754e+001;
n=95; farx(n+1)=2.000498e-001; foe(n+1)=4.110446e-001; krok(n+1)=5.570844e-002; ng(n+1)=2.456807e+002;
n=96; farx(n+1)=1.820226e-001; foe(n+1)=3.906307e-001; krok(n+1)=8.643496e-002; ng(n+1)=1.435650e+002;
n=97; farx(n+1)=1.759376e-001; foe(n+1)=3.815707e-001; krok(n+1)=7.692316e-003; ng(n+1)=4.377551e+002;
n=98; farx(n+1)=1.567656e-001; foe(n+1)=3.634480e-001; krok(n+1)=2.702970e-002; ng(n+1)=4.761694e+002;
n=99; farx(n+1)=1.425153e-001; foe(n+1)=3.521716e-001; krok(n+1)=1.448480e-002; ng(n+1)=4.101979e+002;
n=100; farx(n+1)=1.306185e-001; foe(n+1)=3.355971e-001; krok(n+1)=3.687011e-002; ng(n+1)=4.674760e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
