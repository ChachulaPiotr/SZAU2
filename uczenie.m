%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.474973e+003; foe(n+1)=1.478247e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.312969e+003; foe(n+1)=1.326274e+003; krok(n+1)=6.767654e-004; ng(n+1)=1.942851e+003;
n=2; farx(n+1)=2.813032e+002; foe(n+1)=2.806703e+002; krok(n+1)=4.474402e-003; ng(n+1)=1.398367e+003;
n=3; farx(n+1)=2.283329e+002; foe(n+1)=2.728517e+002; krok(n+1)=8.100612e-004; ng(n+1)=5.363150e+002;
n=4; farx(n+1)=1.136882e+002; foe(n+1)=2.306904e+002; krok(n+1)=9.143281e-004; ng(n+1)=1.270314e+003;
n=5; farx(n+1)=5.612331e+001; foe(n+1)=1.939602e+002; krok(n+1)=1.258665e-004; ng(n+1)=3.155871e+003;
n=6; farx(n+1)=3.669012e+001; foe(n+1)=1.690488e+002; krok(n+1)=1.166078e-003; ng(n+1)=3.860340e+003;
n=7; farx(n+1)=4.178826e+001; foe(n+1)=1.640419e+002; krok(n+1)=5.113081e-004; ng(n+1)=3.722517e+003;
n=8; farx(n+1)=4.027863e+001; foe(n+1)=1.562543e+002; krok(n+1)=1.857915e-003; ng(n+1)=2.939851e+003;
n=9; farx(n+1)=3.897917e+001; foe(n+1)=1.509721e+002; krok(n+1)=1.463096e-003; ng(n+1)=2.134066e+003;
n=10; farx(n+1)=3.857365e+001; foe(n+1)=1.492519e+002; krok(n+1)=4.029366e-004; ng(n+1)=1.840006e+003;
n=11; farx(n+1)=2.459231e+001; foe(n+1)=9.621924e+001; krok(n+1)=7.251821e-003; ng(n+1)=2.217876e+003;
n=12; farx(n+1)=2.437930e+001; foe(n+1)=9.220812e+001; krok(n+1)=5.019773e-005; ng(n+1)=4.943939e+003;
n=13; farx(n+1)=2.257221e+001; foe(n+1)=8.395500e+001; krok(n+1)=3.485222e-003; ng(n+1)=4.116828e+003;
n=14; farx(n+1)=1.932782e+001; foe(n+1)=7.703870e+001; krok(n+1)=4.175705e-004; ng(n+1)=4.178424e+003;
n=15; farx(n+1)=1.631306e+001; foe(n+1)=7.011950e+001; krok(n+1)=8.476039e-004; ng(n+1)=3.429207e+003;
n=16; farx(n+1)=1.156278e+001; foe(n+1)=5.428209e+001; krok(n+1)=3.473809e-003; ng(n+1)=3.061107e+003;
n=17; farx(n+1)=1.069273e+001; foe(n+1)=5.122281e+001; krok(n+1)=3.473499e-004; ng(n+1)=1.141851e+003;
n=18; farx(n+1)=1.049298e+001; foe(n+1)=5.052588e+001; krok(n+1)=4.089425e-004; ng(n+1)=3.683730e+003;
n=19; farx(n+1)=9.945576e+000; foe(n+1)=4.864915e+001; krok(n+1)=2.040296e-003; ng(n+1)=2.786885e+003;
n=20; farx(n+1)=9.903023e+000; foe(n+1)=4.298681e+001; krok(n+1)=1.772228e-003; ng(n+1)=3.561182e+003;
n=21; farx(n+1)=1.013303e+001; foe(n+1)=3.727588e+001; krok(n+1)=2.187783e-003; ng(n+1)=3.935346e+003;
n=22; farx(n+1)=1.045164e+001; foe(n+1)=3.164254e+001; krok(n+1)=1.276921e-003; ng(n+1)=2.311644e+003;
n=23; farx(n+1)=1.055474e+001; foe(n+1)=3.024323e+001; krok(n+1)=5.499825e-004; ng(n+1)=3.063947e+003;
n=24; farx(n+1)=1.074228e+001; foe(n+1)=2.528256e+001; krok(n+1)=5.402185e-003; ng(n+1)=1.281155e+003;
n=25; farx(n+1)=1.073865e+001; foe(n+1)=2.442270e+001; krok(n+1)=4.090701e-004; ng(n+1)=1.658208e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.064122e+001; foe(n+1)=2.353729e+001; krok(n+1)=6.715934e-006; ng(n+1)=2.057437e+003;
n=27; farx(n+1)=1.057042e+001; foe(n+1)=2.282817e+001; krok(n+1)=2.657240e-005; ng(n+1)=8.709876e+002;
n=28; farx(n+1)=1.040925e+001; foe(n+1)=2.110148e+001; krok(n+1)=4.334515e-005; ng(n+1)=1.070937e+003;
n=29; farx(n+1)=9.899337e+000; foe(n+1)=1.747852e+001; krok(n+1)=6.553529e-004; ng(n+1)=4.944648e+002;
n=30; farx(n+1)=9.674582e+000; foe(n+1)=1.580524e+001; krok(n+1)=2.878915e-004; ng(n+1)=5.489336e+002;
n=31; farx(n+1)=8.961007e+000; foe(n+1)=1.433114e+001; krok(n+1)=1.792149e-003; ng(n+1)=4.108542e+002;
n=32; farx(n+1)=7.438291e+000; foe(n+1)=1.261871e+001; krok(n+1)=4.687691e-003; ng(n+1)=5.367592e+002;
n=33; farx(n+1)=5.508445e+000; foe(n+1)=1.032917e+001; krok(n+1)=3.303815e-003; ng(n+1)=1.067756e+003;
n=34; farx(n+1)=4.803413e+000; foe(n+1)=9.212246e+000; krok(n+1)=1.093891e-003; ng(n+1)=2.205998e+003;
n=35; farx(n+1)=4.348876e+000; foe(n+1)=8.561574e+000; krok(n+1)=1.345435e-003; ng(n+1)=7.899085e+002;
n=36; farx(n+1)=3.487298e+000; foe(n+1)=7.426635e+000; krok(n+1)=1.039581e-002; ng(n+1)=8.737468e+002;
n=37; farx(n+1)=3.114556e+000; foe(n+1)=6.805557e+000; krok(n+1)=6.734730e-003; ng(n+1)=1.187324e+003;
n=38; farx(n+1)=2.447324e+000; foe(n+1)=5.687503e+000; krok(n+1)=1.989989e-002; ng(n+1)=4.844091e+002;
n=39; farx(n+1)=2.347858e+000; foe(n+1)=5.511566e+000; krok(n+1)=1.130223e-003; ng(n+1)=3.880949e+002;
n=40; farx(n+1)=1.780943e+000; foe(n+1)=4.803712e+000; krok(n+1)=1.213054e-002; ng(n+1)=3.402139e+002;
n=41; farx(n+1)=1.518618e+000; foe(n+1)=4.511871e+000; krok(n+1)=4.702595e-003; ng(n+1)=4.765181e+002;
n=42; farx(n+1)=1.259508e+000; foe(n+1)=4.135222e+000; krok(n+1)=1.387045e-003; ng(n+1)=1.231350e+003;
n=43; farx(n+1)=1.155353e+000; foe(n+1)=3.938133e+000; krok(n+1)=2.452083e-003; ng(n+1)=8.099210e+002;
n=44; farx(n+1)=1.034429e+000; foe(n+1)=3.729370e+000; krok(n+1)=1.109636e-002; ng(n+1)=4.102499e+002;
n=45; farx(n+1)=9.964795e-001; foe(n+1)=3.639906e+000; krok(n+1)=8.360316e-003; ng(n+1)=6.402248e+002;
n=46; farx(n+1)=9.712312e-001; foe(n+1)=3.558725e+000; krok(n+1)=1.238474e-002; ng(n+1)=5.058911e+002;
n=47; farx(n+1)=8.999971e-001; foe(n+1)=3.375066e+000; krok(n+1)=1.019447e-002; ng(n+1)=7.140264e+002;
n=48; farx(n+1)=8.734765e-001; foe(n+1)=3.281464e+000; krok(n+1)=7.366454e-003; ng(n+1)=3.951814e+002;
n=49; farx(n+1)=7.579751e-001; foe(n+1)=3.024494e+000; krok(n+1)=6.024636e-002; ng(n+1)=5.971508e+002;
n=50; farx(n+1)=6.287420e-001; foe(n+1)=2.653782e+000; krok(n+1)=2.392889e-002; ng(n+1)=3.050052e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.222524e-001; foe(n+1)=2.559652e+000; krok(n+1)=7.698578e-006; ng(n+1)=6.452345e+002;
n=52; farx(n+1)=6.230182e-001; foe(n+1)=2.537904e+000; krok(n+1)=6.137476e-006; ng(n+1)=3.104308e+002;
n=53; farx(n+1)=6.347633e-001; foe(n+1)=2.451249e+000; krok(n+1)=3.809713e-005; ng(n+1)=2.788479e+002;
n=54; farx(n+1)=6.342325e-001; foe(n+1)=2.429021e+000; krok(n+1)=3.292736e-004; ng(n+1)=5.489051e+001;
n=55; farx(n+1)=6.268199e-001; foe(n+1)=2.364758e+000; krok(n+1)=1.954804e-003; ng(n+1)=3.768373e+001;
n=56; farx(n+1)=6.214423e-001; foe(n+1)=2.329309e+000; krok(n+1)=3.128460e-003; ng(n+1)=4.127837e+001;
n=57; farx(n+1)=6.191647e-001; foe(n+1)=2.296296e+000; krok(n+1)=1.358387e-003; ng(n+1)=5.934163e+001;
n=58; farx(n+1)=5.956057e-001; foe(n+1)=1.939155e+000; krok(n+1)=1.809047e-002; ng(n+1)=7.455099e+001;
n=59; farx(n+1)=5.888267e-001; foe(n+1)=1.773409e+000; krok(n+1)=4.935931e-003; ng(n+1)=7.074737e+002;
n=60; farx(n+1)=5.830257e-001; foe(n+1)=1.710908e+000; krok(n+1)=1.611746e-003; ng(n+1)=4.494085e+002;
n=61; farx(n+1)=5.766727e-001; foe(n+1)=1.642532e+000; krok(n+1)=3.792794e-003; ng(n+1)=4.295682e+002;
n=62; farx(n+1)=5.829944e-001; foe(n+1)=1.456860e+000; krok(n+1)=1.078150e-002; ng(n+1)=4.494184e+002;
n=63; farx(n+1)=5.683052e-001; foe(n+1)=1.307682e+000; krok(n+1)=1.139839e-002; ng(n+1)=5.315687e+002;
n=64; farx(n+1)=5.565469e-001; foe(n+1)=1.244684e+000; krok(n+1)=9.793864e-003; ng(n+1)=3.754329e+002;
n=65; farx(n+1)=5.356639e-001; foe(n+1)=1.161149e+000; krok(n+1)=5.852382e-003; ng(n+1)=3.218891e+002;
n=66; farx(n+1)=5.178158e-001; foe(n+1)=1.080461e+000; krok(n+1)=8.468065e-003; ng(n+1)=4.205179e+002;
n=67; farx(n+1)=4.969408e-001; foe(n+1)=1.024806e+000; krok(n+1)=7.883344e-003; ng(n+1)=3.576466e+002;
n=68; farx(n+1)=4.707712e-001; foe(n+1)=9.828424e-001; krok(n+1)=9.045235e-003; ng(n+1)=3.097625e+002;
n=69; farx(n+1)=3.637630e-001; foe(n+1)=8.996901e-001; krok(n+1)=3.805310e-002; ng(n+1)=2.335923e+002;
n=70; farx(n+1)=3.227784e-001; foe(n+1)=8.570646e-001; krok(n+1)=1.949868e-002; ng(n+1)=1.592201e+002;
n=71; farx(n+1)=2.681548e-001; foe(n+1)=7.899425e-001; krok(n+1)=1.532510e-002; ng(n+1)=4.642111e+002;
n=72; farx(n+1)=2.379356e-001; foe(n+1)=7.415430e-001; krok(n+1)=8.534063e-003; ng(n+1)=6.880921e+002;
n=73; farx(n+1)=2.283212e-001; foe(n+1)=7.156489e-001; krok(n+1)=6.905382e-003; ng(n+1)=2.954288e+002;
n=74; farx(n+1)=2.241389e-001; foe(n+1)=6.619995e-001; krok(n+1)=3.809184e-002; ng(n+1)=1.731494e+002;
n=75; farx(n+1)=2.200816e-001; foe(n+1)=6.344733e-001; krok(n+1)=6.072741e-003; ng(n+1)=5.031772e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=2.202687e-001; foe(n+1)=6.266177e-001; krok(n+1)=2.352749e-006; ng(n+1)=2.660133e+002;
n=77; farx(n+1)=2.218060e-001; foe(n+1)=6.133827e-001; krok(n+1)=2.894239e-005; ng(n+1)=1.317434e+002;
n=78; farx(n+1)=2.224404e-001; foe(n+1)=6.074473e-001; krok(n+1)=7.316160e-006; ng(n+1)=1.744144e+002;
n=79; farx(n+1)=2.223327e-001; foe(n+1)=6.056465e-001; krok(n+1)=4.005361e-004; ng(n+1)=1.370660e+001;
n=80; farx(n+1)=2.212324e-001; foe(n+1)=6.035809e-001; krok(n+1)=4.352222e-004; ng(n+1)=1.468358e+001;
n=81; farx(n+1)=2.191822e-001; foe(n+1)=5.984337e-001; krok(n+1)=1.106947e-003; ng(n+1)=1.497222e+001;
n=82; farx(n+1)=2.126878e-001; foe(n+1)=5.866109e-001; krok(n+1)=1.196180e-002; ng(n+1)=1.291689e+001;
n=83; farx(n+1)=1.977919e-001; foe(n+1)=5.619518e-001; krok(n+1)=3.904632e-003; ng(n+1)=2.367260e+001;
n=84; farx(n+1)=1.852024e-001; foe(n+1)=5.399882e-001; krok(n+1)=2.426108e-002; ng(n+1)=7.060664e+001;
n=85; farx(n+1)=1.802786e-001; foe(n+1)=5.296300e-001; krok(n+1)=1.969225e-003; ng(n+1)=4.597576e+001;
n=86; farx(n+1)=1.704586e-001; foe(n+1)=5.013249e-001; krok(n+1)=2.876644e-002; ng(n+1)=4.831853e+001;
n=87; farx(n+1)=1.690102e-001; foe(n+1)=4.885398e-001; krok(n+1)=8.705227e-003; ng(n+1)=1.678205e+002;
n=88; farx(n+1)=1.692509e-001; foe(n+1)=4.741341e-001; krok(n+1)=7.172266e-003; ng(n+1)=1.726302e+002;
n=89; farx(n+1)=1.744433e-001; foe(n+1)=4.566934e-001; krok(n+1)=9.307204e-003; ng(n+1)=2.479217e+002;
n=90; farx(n+1)=1.863492e-001; foe(n+1)=4.389121e-001; krok(n+1)=3.085098e-002; ng(n+1)=9.160637e+001;
n=91; farx(n+1)=1.897920e-001; foe(n+1)=4.251094e-001; krok(n+1)=2.527804e-002; ng(n+1)=1.766489e+002;
n=92; farx(n+1)=1.835644e-001; foe(n+1)=4.069095e-001; krok(n+1)=2.265123e-002; ng(n+1)=1.591012e+002;
n=93; farx(n+1)=1.697405e-001; foe(n+1)=3.886935e-001; krok(n+1)=2.091551e-002; ng(n+1)=2.709927e+002;
n=94; farx(n+1)=1.451279e-001; foe(n+1)=3.547738e-001; krok(n+1)=1.423591e-002; ng(n+1)=3.475658e+002;
n=95; farx(n+1)=1.380755e-001; foe(n+1)=3.440155e-001; krok(n+1)=8.108299e-003; ng(n+1)=1.679996e+002;
n=96; farx(n+1)=1.314870e-001; foe(n+1)=3.338045e-001; krok(n+1)=2.319637e-002; ng(n+1)=1.222061e+002;
n=97; farx(n+1)=1.245600e-001; foe(n+1)=3.221383e-001; krok(n+1)=1.830545e-002; ng(n+1)=7.893060e+001;
n=98; farx(n+1)=1.212423e-001; foe(n+1)=3.141898e-001; krok(n+1)=2.284436e-002; ng(n+1)=2.210810e+002;
n=99; farx(n+1)=1.196317e-001; foe(n+1)=3.101650e-001; krok(n+1)=7.585473e-003; ng(n+1)=2.335563e+002;
n=100; farx(n+1)=1.103860e-001; foe(n+1)=2.963991e-001; krok(n+1)=4.639275e-002; ng(n+1)=3.023213e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
